<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Emoji Picker Example</title>
  <link href="/assets/styles/output.css" rel="stylesheet" />
  <script type="module" src="https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/index.js"></script>
  <style>
    /* Basic styling for positioning */
    #emojiPicker {
      position: absolute;
      bottom: 50px;
      right: 5px;
      z-index: 10;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="relative h-full w-full mr-4">
    <input
      id="inputField"
      class="rounded-[40px] pl-5 text-xs bg-custom9 text-custom2 px-0 border-none placeholder-custom2 focus:outline-none focus:ring-0 w-full h-full sm:text-base focus:border focus:border-custom3"
      placeholder="Hello I am new here"
    />
    <img
      id="emojiButton"
      class="absolute h-5 w-5 bottom-3 right-5 cursor-pointer"
      src="/assets/icon/emoji/smiley.svg"
    />

    <!-- Emoji picker element (hidden by default) -->
    <emoji-picker id="emojiPicker" class="hidden"></emoji-picker>
  </div>

  <script>
    // Ensure everything loads before accessing DOM
    document.addEventListener('DOMContentLoaded', function () {
      // References to the elements
      const emojiButton = document.getElementById('emojiButton');
      const emojiPicker = document.getElementById('emojiPicker');
      const inputField = document.getElementById('inputField');

      // Toggle the emoji picker visibility when the smiley button is clicked
      emojiButton.addEventListener('click', () => {
        emojiPicker.classList.toggle('hidden');
        console.log("Emoji button clicked");
      });

      // Append selected emoji to the input field
      emojiPicker.addEventListener('emoji-click', (event) => {
        const emoji = event.detail.unicode;
        inputField.value += emoji; // Append the emoji to the input field's value
      });

      // Close the emoji picker when clicking outside of it
      document.addEventListener('click', (event) => {
        if (!emojiButton.contains(event.target) && !emojiPicker.contains(event.target)) {
          emojiPicker.classList.add('hidden');
        }
      });
    });
  </script>
</body>
</html>
